<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/layout.xhtml">
    <ui:define name="title">Resetear Contraseña</ui:define>
    
    <ui:define name="content">
        <section class="py-5">
            <div class="container" style="max-width: 600px;">
                <h2 class="text-center text-primary mb-4">Nueva Contraseña</h2>
                <p class="text-center text-muted mb-4">
                    Ingresa el código de recuperación y tu nueva contraseña.
                </p>
                
                <p:panel styleClass="shadow-sm">
                    <div class="p-4">
                        <h:form>
                            <p:messages id="messages"/>
                            
                            <div class="mb-3">
                                <label class="form-label">
                                    <i class="fas fa-key me-2"></i>Código de Recuperación
                                </label>
                                <p:inputText value="#{resetPasswordBean.token}" 
                                           styleClass="form-control" 
                                           placeholder="Pega aquí el código que recibiste"
                                           style="font-family: monospace; font-size: 13px;"
                                           required="true"/>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">
                                    <i class="fas fa-lock me-2"></i>Nueva Contraseña
                                </label>
                                <p:password value="#{resetPasswordBean.newPassword}" 
                                          styleClass="form-control" 
                                          placeholder="Mínimo 8 caracteres"
                                          feedback="false"
                                          required="true"/>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">
                                    <i class="fas fa-lock me-2"></i>Confirmar Contraseña
                                </label>
                                <p:password value="#{resetPasswordBean.confirmPassword}" 
                                          styleClass="form-control" 
                                          placeholder="Repite la contraseña"
                                          feedback="false"
                                          required="true"/>
                            </div>
                            
                            <p:commandButton value="Cambiar Contraseña" 
                                           styleClass="btn btn-primary w-100"
                                           action="#{resetPasswordBean.cambiarPassword}"
                                           update="messages"/>
                            
                            <div class="text-center mt-3">
                                <p class="mb-0">
                                    ¿No tienes código? 
                                    <h:link outcome="forgot-password" value="Solicitar nuevo código" styleClass="text-primary"/>
                                </p>
                            </div>
                        </h:form>
                    </div>
                </p:panel>
            </div>
        </section>
    </ui:define>
</ui:composition>
</html>
