<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <body>
        <ui:composition template="./../../TemplateSitio.xhtml">
            <ui:define name="head">
                <title>Valoración - Contexto Familiar (D1)</title>
                <style>
                    .dimension-form { max-width: 900px; margin: 20px auto; }
                    .dimension-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                        color: white; padding: 25px; border-radius: 8px 8px 0 0; margin-bottom: 20px; }
                    .dimension-header h1 { margin: 0 0 5px 0; font-size: 28px; }
                    .dimension-header p { margin: 5px 0; font-size: 14px; opacity: 0.9; }
                    .section-card { border: 1px solid #ddd; border-radius: 8px; margin-bottom: 20px; 
                        box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
                    .section-title { background: #f5f5f5; border-left: 4px solid #667eea; padding: 15px; 
                        font-weight: bold; font-size: 16px; }
                    .section-content { padding: 20px; }
                    .likert-group { margin-bottom: 20px; }
                    .likert-question { font-weight: 600; margin-bottom: 10px; color: #333; font-size: 14px; }
                    .likert-scale { display: flex; gap: 10px; justify-content: space-between; }
                    .likert-option { flex: 1; text-align: center; }
                    .likert-radio { margin: 0; }
                    .likert-label { display: block; font-size: 12px; margin-top: 5px; color: #666; }
                    .likert-1 { color: #f44336; } /* Rojo - Desacuerdo Total */
                    .likert-2 { color: #ff9800; } /* Naranja - Desacuerdo */
                    .likert-3 { color: #ffc107; } /* Amarillo - Neutral */
                    .likert-4 { color: #8bc34a; } /* Verde Claro - Acuerdo */
                    .likert-5 { color: #4caf50; } /* Verde - Acuerdo Total */
                    .textarea-field { width: 100%; min-height: 100px; padding: 10px; 
                        border: 1px solid #ddd; border-radius: 4px; font-family: Arial, sans-serif; }
                    .button-group { text-align: right; margin-top: 20px; gap: 10px; }
                    .btn-save { background: #4caf50; color: white; padding: 10px 25px; 
                        border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
                    .btn-save:hover { background: #45a049; }
                    .btn-cancel { background: #f44336; color: white; padding: 10px 25px; 
                        border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
                    .btn-cancel:hover { background: #da190b; }
                    .score-display { background: #e8f5e9; border-left: 4px solid #4caf50; 
                        padding: 15px; margin-bottom: 20px; border-radius: 4px; }
                    .score-display strong { font-size: 24px; color: #2e7d32; }
                    .legend { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; 
                        margin-bottom: 20px; border-radius: 4px; font-size: 13px; }
                    .legend-item { margin: 5px 0; }
                </style>
            </ui:define>

            <ui:define name="content">
                <h:form>
                    
                      <!-- INFORMACIÓN DE LA MADRE -->
                                <div class="form-section">
                                    <h3>2. Información de la Madre</h3>

                                    <div class="form-row full">
                                        <h:outputLabel value="Nombre Completo" styleClass="form-label"/>
                                        <h:inputText id="madreNombre" 
                                                    value="#{caracterizacionControllerMejorado.contextoFamiliar.madreNombre}"
                                                    
                                                    styleClass="form-control"/>
                                    </div>

                                    <div class="form-row">
                                        <div>
                                            <h:outputLabel value="Documento de Identidad" styleClass="form-label"/>
                                            <h:inputText id="madreDocumento" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.madreDocumento}"
                                                        
                                                        styleClass="form-control"/>
                                        </div>
                                        <div>
                                            <h:outputLabel value="Teléfono" styleClass="form-label"/>
                                            <h:inputText id="madreTelefono" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.madreTelefono}"
                                                        
                                                        styleClass="form-control"/>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div>
                                            <h:outputLabel value="Email" styleClass="form-label"/>
                                            <h:inputText id="madreEmail" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.madreEmail}"
                                                        
                                                        styleClass="form-control"/>
                                        </div>
                                        <div>
                                            <h:outputLabel value="Ocupación" styleClass="form-label"/>
                                            <h:inputText id="madreOcupacion" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.madreOcupacion}"
                                                        
                                                        styleClass="form-control"/>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div>
                                            <h:outputLabel value="Escolaridad" styleClass="form-label"/>
                                            <h:selectOneMenu id="madreEscolaridad" 
                                                           value="#{caracterizacionControllerMejorado.contextoFamiliar.madreEscolaridad}"
                                                           styleClass="form-control">
                                                <f:selectItem itemLabel="-- Seleccione --" itemValue=""/>
                                                <f:selectItem itemLabel="Primaria" itemValue="Primaria"/>
                                                <f:selectItem itemLabel="Secundaria" itemValue="Secundaria"/>
                                                <f:selectItem itemLabel="Técnica" itemValue="Técnica"/>
                                                <f:selectItem itemLabel="Tecnológica" itemValue="Tecnológica"/>
                                                <f:selectItem itemLabel="Universitaria" itemValue="Universitaria"/>
                                                <f:selectItem itemLabel="No sabe leer ni escribir" itemValue="Analfabeta"/>
                                            </h:selectOneMenu>
                                        </div>
                                        <div></div>
                                    </div>
                                </div>

                                <!-- INFORMACIÓN DEL PADRE -->
                                <div class="form-section">
                                    <h3>3. Información del Padre</h3>

                                    <div class="form-row full">
                                        <h:outputLabel value="Nombre Completo" styleClass="form-label"/>
                                        <h:inputText id="padreNombre" 
                                                    value="#{caracterizacionControllerMejorado.contextoFamiliar.padreNombre}"
                                                    
                                                    styleClass="form-control"/>
                                    </div>

                                    <div class="form-row">
                                        <div>
                                            <h:outputLabel value="Documento de Identidad" styleClass="form-label"/>
                                            <h:inputText id="padreDocumento" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.padreDocumento}"
                                                        
                                                        styleClass="form-control"/>
                                        </div>
                                        <div>
                                            <h:outputLabel value="Teléfono" styleClass="form-label"/>
                                            <h:inputText id="padreTelefono" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.padreTelefono}"
                                                        
                                                        styleClass="form-control"/>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div>
                                            <h:outputLabel value="Email" styleClass="form-label"/>
                                            <h:inputText id="padreEmail" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.padreEmail}"
                                                        
                                                        styleClass="form-control"/>
                                        </div>
                                        <div>
                                            <h:outputLabel value="Ocupación" styleClass="form-label"/>
                                            <h:inputText id="padreOcupacion" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.padreOcupacion}"
                                                        
                                                        styleClass="form-control"/>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div>
                                            <h:outputLabel value="Escolaridad" styleClass="form-label"/>
                                            <h:selectOneMenu id="padreEscolaridad" 
                                                           value="#{caracterizacionControllerMejorado.contextoFamiliar.padreEscolaridad}"
                                                           styleClass="form-control">
                                                <f:selectItem itemLabel="-- Seleccione --" itemValue=""/>
                                                <f:selectItem itemLabel="Primaria" itemValue="Primaria"/>
                                                <f:selectItem itemLabel="Secundaria" itemValue="Secundaria"/>
                                                <f:selectItem itemLabel="Técnica" itemValue="Técnica"/>
                                                <f:selectItem itemLabel="Tecnológica" itemValue="Tecnológica"/>
                                                <f:selectItem itemLabel="Universitaria" itemValue="Universitaria"/>
                                                <f:selectItem itemLabel="No sabe leer ni escribir" itemValue="Analfabeta"/>
                                            </h:selectOneMenu>
                                        </div>
                                        <div></div>
                                    </div>
                                </div>

                                <!-- COMPOSICIÓN Y RELACIONES FAMILIARES -->
                                <div class="form-section">
                                    <h3>4. Composición y Relaciones Familiares</h3>

                                    <div class="form-row full">
                                        <h:outputLabel value="Otras personas que viven con el estudiante" styleClass="form-label"/>
                                        <h:inputTextarea id="otrosFamiliares" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.otrosFamiliares}"
                                                        rows="2"
                                                        
                                                        styleClass="form-control"/>
                                    </div>

                                    <div class="form-row full">
                                        <h:outputLabel value="Relaciones Familiares y Dinámicas" styleClass="form-label"/>
                                        <h:inputTextarea id="relacionesFamiliares" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.relacionesFamiliares}"
                                                        rows="3"
                                                        
                                                        styleClass="form-control"/>
                                    </div>

                                    <div class="form-row full">
                                        <h:outputLabel value="Comunicación Familiar" styleClass="form-label"/>
                                        <h:inputTextarea id="comunicacionFamiliar" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.comunicacionFamiliar}"
                                                        rows="3"
                                                        
                                                        styleClass="form-control"/>
                                    </div>
                                </div>

                                <!-- VIVIENDA Y SITUACIÓN SOCIOECONÓMICA -->
                                <div class="form-section">
                                    <h3>5. Vivienda y Situación Socioeconómica</h3>

                                    <div class="form-row">
                                        <div>
                                            <h:outputLabel value="Tipo de Vivienda" styleClass="form-label"/>
                                            <h:selectOneMenu id="tipoVivienda" 
                                                           value="#{caracterizacionControllerMejorado.contextoFamiliar.tipoVivienda}"
                                                           styleClass="form-control">
                                                <f:selectItem itemLabel="-- Seleccione --" itemValue=""/>
                                                <f:selectItem itemLabel="Casa propia" itemValue="Casa propia"/>
                                                <f:selectItem itemLabel="Apartamento" itemValue="Apartamento"/>
                                                <f:selectItem itemLabel="Inquilinato" itemValue="Inquilinato"/>
                                                <f:selectItem itemLabel="Habitación arrendada" itemValue="Habitación arrendada"/>
                                                <f:selectItem itemLabel="Vivienda compartida" itemValue="Vivienda compartida"/>
                                                <f:selectItem itemLabel="Refugio/Albergue" itemValue="Refugio/Albergue"/>
                                            </h:selectOneMenu>
                                        </div>
                                        <div>
                                            <h:outputLabel value="Tenencia" styleClass="form-label"/>
                                            <h:selectOneMenu id="tenenciaVivienda" 
                                                           value="#{caracterizacionControllerMejorado.contextoFamiliar.tenenciaVivienda}"
                                                           styleClass="form-control">
                                                <f:selectItem itemLabel="-- Seleccione --" itemValue=""/>
                                                <f:selectItem itemLabel="Propia" itemValue="Propia"/>
                                                <f:selectItem itemLabel="Arrendada" itemValue="Arrendada"/>
                                                <f:selectItem itemLabel="Prestada" itemValue="Prestada"/>
                                                <f:selectItem itemLabel="Otra" itemValue="Otra"/>
                                            </h:selectOneMenu>
                                        </div>
                                    </div>

                                    <div class="form-row full">
                                        <h:outputLabel value="Condiciones de la Vivienda" styleClass="form-label"/>
                                        <h:inputTextarea id="condicionesVivienda" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.condicionesVivienda}"
                                                        rows="3"
                                                        
                                                        styleClass="form-control"/>
                                    </div>

                                    <div class="form-row full">
                                        <h:outputLabel value="Situación Económica" styleClass="form-label"/>
                                        <h:inputTextarea id="situacionEconomica" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.situacionEconomica}"
                                                        rows="3"
                                                        
                                                        styleClass="form-control"/>
                                    </div>
                                </div>

                                <!-- OBSERVACIONES ADICIONALES -->
                                <div class="form-section">
                                    <h3>6. Observaciones Adicionales</h3>

                                    <div class="form-row full">
                                        <h:outputLabel value="Otros comentarios relevantes" styleClass="form-label"/>
                                        <h:inputTextarea id="observacionesFamilia" 
                                                        value="#{caracterizacionControllerMejorado.contextoFamiliar.observacionesFamilia}"
                                                        rows="3"
                                                        
                                                        styleClass="form-control"/>
                                    </div>
                                </div>

                                <!-- MENSAJES -->
                                <p:messages id="messages" showDetail="true" closable="true" style="margin-bottom: 20px;"/>
                            </div>

                            <div class="card-footer text-end">
                                <h:commandButton value="← Volver" 
                                                action="/views/caracterizacion/contexto_escolar.xhtml?faces-redirect=true"
                                                styleClass="btn btn-secondary" 
                                                style="margin-right: 10px;"/>
                                <p:commandButton id="btnGuardar" value="Guardar y Continuar →" 
                                                action="#{caracterizacionControllerMejorado.guardarContextoFamiliarYRegistrarAcudiente()}"
                                                styleClass="btn btn-primary"
                                                update=":formContextoFamiliar:messages"
                                                oncomplete="if (!args.validationFailed) PF('dlgContextoFamiliarGuardado').show();" />
                            </div>
                    
                    
                    
                    
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html>
