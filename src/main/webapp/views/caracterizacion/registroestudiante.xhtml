<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <body>
        <ui:composition template="./../TemplateSitio.xhtml">
            <ui:define name="content">
                <h:form styleClass="container-fluid px-3" style="background-color: #e3f2fd; padding: 20px; border-radius: 8px;">
                    <div class="card shadow-sm p-4">
                        <h2 class="text-primary fw-bold mb-3">Listado de estudiantes con TEA</h2>

                        <h:messages id="mensajes" globalOnly="true" infoStyle="color:green" />

                        <div class="mb-4">
                            <h:commandButton value="Crear Estudiante con TEA"
                                             action="#{estudianteTeaController.crearEstudianteP1()}"
                                             styleClass="btn btn-primary" />
                        </div>

                        <div class="table-responsive">
                            <table id="t-all" class="table table-bordered table-hover jsf-data-table display nowrap" width="100%">
                                <thead class="table-primary text-center">
                                    <tr>
                                        <th>Estudiante ID</th>
                                        <th>Tipo documento</th>
                                        <th>Numero Documento</th>
                                        <th>Nombres</th>
                                        <th>Apellidos</th>
                                        <th>Curso</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <h:form>
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Tipo Documento</th>
                                                <th>Número Documento</th>
                                                <th>Nombres</th>
                                                <th>Apellidos</th>
                                                <th>Curso</th>
                                                <th class="text-center">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ui:repeat value="#{estudianteTeaController.obtenerEstudiantes()}" var="item">
                                                <tr>
                                                    <td>#{item.idEstudiante}</td>
                                                    <td>#{item.tipoDocumentoIdTipoDocumento.nombreTipoDocumento}</td>
                                                    <td>#{item.numeroDocumentoEstudiante}</td>
                                                    <td>#{item.primerNombreEstudiante} #{item.segundoNombreEstudiante}</td>
                                                    <td>#{item.primerApellidoEstudiante} #{item.segundoApellidoEstudiante}</td>
                                                    <td>#{item.cursoIdCurso.codigoCurso}</td>
                                                    <td class="text-center">
                                                        <h:commandButton value="Editar"
                                                                         action="#{estudianteTeaController.editarEstudianteP1(item)}"
                                                                         styleClass="btn btn-info btn-sm me-1"
                                                                         style="background-color: #a7d8ff; border-color: #91caff; color: #003f5c;" />
                                                        <h:commandButton value="Eliminar"
                                                                         action="#{estudianteTeaController.eliminarEstudiante(item)}"
                                                                         onclick="return confirm('¿Desea eliminar el registro?')"
                                                                         styleClass="btn btn-danger btn-sm"
                                                                         style="background-color: #ffc5c5; border-color: #ffaaaa; color: #8b0000;" />
                                                    </td>
                                                </tr>
                                            </ui:repeat>
                                        </tbody>
                                    </table>
                                </h:form>
                            </table>
                        </div>

                        <script>
                            $(document).ready(function () {
                                $('.jsf-data-table').DataTable({
                                    dom: 'Bfrtip',
                                    language: {
                                        url: 'https://cdn.datatables.net/plug-ins/1.11.3/i18n/es_es.json'
                                    },
                                    pageLength: 50,
                                    buttons: ['copy', 'csv', 'excel', 'pdf', 'print']
                                });
                            });
                        </script>
                    </div>
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html>
