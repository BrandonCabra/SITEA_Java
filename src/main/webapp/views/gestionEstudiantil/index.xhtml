<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>
        <ui:composition template="./../TemplateSitio.xhtml">
            <ui:define name="content">
                
<h1>Crear Nuevo Usuario del Sistema</h1>
                
                <h:link value="← Volver al Listado" outcome="usuarioListar" styleClass="btn-back" />
                
                <h:messages globalOnly="true" showDetail="true" style="color: red;" />

                <h:form id="formCrear">
                    <h:panelGrid columns="3" cellpadding="5" styleClass="form-table">
                        
                        <h:outputLabel value="Nombre(s):" for="nombreInput" />
                        <h:inputText id="nombreInput" value="#{adminUsuarioBean.nuevoUsuario.nombre}" required="true" />
                        <h:message for="nombreInput" style="color:red" />
                        
                        <h:outputLabel value="Apellido(s):" for="apellidoInput" />
                        <h:inputText id="apellidoInput" value="#{adminUsuarioBean.nuevoUsuario.apellidos}" required="true" />
                        <h:message for="apellidoInput" style="color:red" />

                        <h:outputLabel value="Documento (DNI):" for="dniInput" />
                        <h:inputText id="dniInput" value="#{adminUsuarioBean.nuevoUsuario.dni}" required="true" />
                        <h:message for="dniInput" style="color:red" />

                        <h:outputLabel value="Correo (Email):" for="emailInput" />
                        <h:inputText id="emailInput" value="#{adminUsuarioBean.nuevoUsuario.email}" required="true" 
                                     validatorMessage="Formato de Email no válido.">
                            <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                        </h:inputText>
                        <h:message for="emailInput" style="color:red" />
                        
                        <h:outputLabel value="Teléfono:" for="telInput" />
                        <h:inputText id="telInput" value="#{adminUsuarioBean.nuevoUsuario.telefono}" />
                        <h:message for="telInput" style="color:red" />

                        <h:outputLabel value="Contraseña Temporal:" for="passInput" />
                        <h:inputSecret id="passInput" value="#{adminUsuarioBean.passwordClaro}" required="true" />
                        <h:message for="passInput" style="color:red" />

                        <h:outputLabel value="Rol a Asignar:" for="rolSelect" />
                        <h:selectOneMenu id="rolSelect" value="#{adminUsuarioBean.rolSeleccionadoId}" required="true">
                            <f:selectItem itemLabel="-- Seleccionar Rol --" itemValue="#{null}" noSelectionOption="true" />
                            <f:selectItems value="#{adminUsuarioBean.listaRoles}" var="rol" 
                                           itemLabel="#{rol.nombre}" itemValue="#{rol.id}" />
                        </h:selectOneMenu>
                        <h:message for="rolSelect" style="color:red" />
                        
                        <h:outputLabel />
                        <h:commandButton value="Crear Usuario" action="#{adminUsuarioBean.crearUsuario}" styleClass="btn btn-primary" />
                        <h:outputLabel />
                        
                    </h:panelGrid>
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html>

